ğŸ‰ BACKEND PRESENSI - SETUP SELESAI! ğŸ‰

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STATUS: âœ… PRODUCTION READY - SIAP DEPLOY KE RAILWAY

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ APA YANG SUDAH DIKERJAKAN:

1. âœ… SERVER.JS DIUPDATE
   - CORS dikonfigurasi untuk ProjectOne (frontend)
   - Production-ready error handling
   - Graceful shutdown implementation
   - Environment-based configuration

2. âœ… SEMUA DOKUMENTASI LENGKAP DIBUAT
   - QUICK_START.md          â†’ 5 menit setup guide (BACA DULU!)
   - DEPLOYMENT_GUIDE.md     â†’ Detailed Railway deployment steps
   - FRONTEND_INTEGRATION.md â†’ Code examples untuk ProjectOne
   - SETUP_CHECKLIST.md      â†’ Pre-deployment checklist
   - README.md               â†’ Project overview

3. âœ… DATABASE SCHEMA SIAP
   - database.sql            â†’ SQL untuk create tables

4. âœ… ENVIRONMENT CONFIGURATION
   - .env                    â†’ EDIT dengan credentials Anda
   - .env.example            â†’ Template reference
   - Procfile                â†’ Railway deployment config

5. âœ… SETUP SCRIPTS
   - setup.sh                â†’ Linux/Mac setup
   - setup.bat               â†’ Windows setup

6. âœ… SEMUA CODE SUDAH DIPUSH KE REPOSITORY
   - Commit hash: 8723a09
   - Branch: main
   - Siap untuk Railway deployment

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ LANGKAH-LANGKAH DEPLOYMENT (IKUTI URUTAN):

LANGKAH 1: Setup Railway PostgreSQL (5 menit)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Buka https://railway.app
2. Login/Register
3. Create New Project â†’ Database â†’ PostgreSQL
4. Database akan dibuat otomatis
5. Klik PostgreSQL service
6. Buka tab "Variables" atau "Settings"
7. COPY DATABASE_URL (format: postgresql://...)
8. Simpan URL ini di tempat aman

LANGKAH 2: Deploy Code ke Railway (3 menit)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Railway akan auto-detect repository Anda:
1. Create New Project â†’ Deploy from GitHub
2. Select repository "presensi"
3. Railway auto-detect Node.js
4. Klik Deploy
5. Tunggu deployment selesai (bisa 2-3 menit)

LANGKAH 3: Set Environment Variables (5 menit)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Di Railway Dashboard:
1. Klik service "Node App"
2. Tab "Variables"
3. Tambahkan variables berikut:

   DATABASE_URL = [PASTE dari step 1]
   PORT = 3000
   NODE_ENV = production
   JWT_SECRET = [GENERATE - lihat di bawah]
   EMAIL_SERVICE = gmail
   EMAIL_USER = your-email@gmail.com
   EMAIL_PASS = [app-password - lihat di bawah]
   CORS_ORIGIN = https://yourdomain.com
   BASE_URL = https://yourdomain.com

GENERATE JWT_SECRET:
   Buka terminal, jalankan:
   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
   Copy hasilnya ke EMAIL_PASS

GENERATE EMAIL_PASS (dari Gmail):
   1. Buka https://myaccount.google.com
   2. Security â†’ 2-Step Verification (aktifkan dulu)
   3. Security â†’ App Passwords
   4. Select: Mail & Windows Computer
   5. Copy 16-character password ke EMAIL_PASS

LANGKAH 4: Create Database Tables (2 menit)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Railway Dashboard â†’ PostgreSQL service
2. Klik "Connect" atau buka Query Editor
3. Copy seluruh isi file "database.sql" 
4. Paste di Query Editor
5. Klik "Run" atau "Execute"
6. Tunggu selesai (tidak ada error berarti sukses)

LANGKAH 5: Test API (2 menit)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Railway Dashboard â†’ Node App
2. Buka URL yang diberikan (format: https://xxxx-prod.up.railway.app)
3. Test health check:
   https://xxxx-prod.up.railway.app/api/health
   Should return: {"success": true, "message": "API berjalan"}
4. Jika OK â†’ Backend sudah berjalan!

LANGKAH 6: Connect ProjectOne Frontend (10 menit)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Di ProjectOne folder:
1. Edit .env.local:
   REACT_APP_API_URL=http://localhost:3000

2. Edit .env.production:
   REACT_APP_API_URL=https://xxxx-prod.up.railway.app

3. Di frontend code, gunakan:
   const API_URL = process.env.REACT_APP_API_URL;
   
   // Login example:
   fetch(`${API_URL}/api/login`, {
     method: 'POST',
     headers: { 'Content-Type': 'application/json' },
     body: JSON.stringify({ email, password })
   })

4. Baca FRONTEND_INTEGRATION.md untuk code examples lengkap

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“š DOKUMENTASI UNTUK DIBACA:

PRIORITAS TINGGI (BACA INI DULU):
1. QUICK_START.md - 5 menit overview semua steps
2. DEPLOYMENT_GUIDE.md - Detailed setup untuk Railway

PRIORITAS MEDIUM:
3. FRONTEND_INTEGRATION.md - Code examples ProjectOne integration
4. README.md - API endpoints reference

PRIORITAS RENDAH (REFERENCE):
5. SETUP_CHECKLIST.md - Checklist lengkap
6. database.sql - Database schema
7. .env.example - Environment variables

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”‘ ENVIRONMENT VARIABLES YANG DIPERLUKAN:

WAJIB (HARUS ADA):
- DATABASE_URL       : PostgreSQL connection string dari Railway
- JWT_SECRET         : Random 32+ characters
- EMAIL_SERVICE      : gmail
- EMAIL_USER         : your-email@gmail.com
- EMAIL_PASS         : Gmail app password (BUKAN password biasa!)
- CORS_ORIGIN        : Frontend URL untuk CORS
- NODE_ENV           : production

OPSIONAL (BISA DEFAULT):
- PORT               : Default 3000
- BASE_URL           : Default sama dengan CORS_ORIGIN

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”— KONEKSI DENGAN PROJECTONE:

Backend sudah dikonfigurasi untuk support CORS dari multiple origins:
- http://localhost:3000      (local backend)
- http://localhost:3001      (alternative local)
- http://localhost:8080      (local ProjectOne)
- http://192.168.1.1:8080    (ProjectOne on network)
- https://projectone.vercel.app (production)
- Atau any URL di CORS_ORIGIN variable

BAGAIMANA CARA CONNECT:
1. Frontend perlu tau API_URL backend
2. Set di .env atau hardcode di code
3. Include token di setiap request yang perlu auth
4. Format: "Authorization: Bearer <token>"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš¡ TIPS & TRICKS:

âœ“ GENERATE JWT_SECRET:
  node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

âœ“ SETUP GMAIL APP PASSWORD:
  1. https://myaccount.google.com
  2. Security â†’ App Passwords (bukan password Gmail biasa!)
  3. Select Mail & Windows Computer
  4. Copy 16-char password

âœ“ TEST RAILWAY URL:
  https://xxxx-prod.up.railway.app/api/health

âœ“ VIEW RAILWAY LOGS:
  npm install -g @railway/cli
  railway login
  railway logs

âœ“ PULL ENV DARI RAILWAY:
  railway env pull

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ TROUBLESHOOTING CEPAT:

âŒ "Database error: ENOTFOUND"
â†’ DATABASE_URL belum diset di .env atau salah format
â†’ Pastikan format: postgresql://user:pass@host:5432/db

âŒ CORS error dari ProjectOne
â†’ Frontend URL belum di allowedOrigins
â†’ Edit server.js atau set CORS_ORIGIN variable

âŒ Email not sending
â†’ Gunakan Gmail App Password, bukan password biasa
â†’ Pastikan 2FA sudah aktif di Gmail

âŒ 401 Unauthorized
â†’ Token tidak include di Authorization header
â†’ Format: "Bearer <token>"
â†’ Check token tidak expired (7 hari)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CHECKLIST SEBELUM DEPLOY:

â–¡ DATABASE_URL sudah disiapkan dari Railway
â–¡ JWT_SECRET sudah di-generate
â–¡ EMAIL_USER dan EMAIL_PASS sudah siap
â–¡ CORS_ORIGIN diisi dengan frontend URL
â–¡ Code sudah di-push ke main branch
â–¡ README.md, QUICK_START.md sudah dibaca
â–¡ Database script (database.sql) sudah dijalankan
â–¡ API health check test OK
â–¡ Token bisa dihasilkan dari login

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ HASIL AKHIR:

Setelah mengikuti langkah-langkah di atas:
âœ… Backend berjalan di Railway
âœ… Database terhubung dan siap
âœ… CORS configured untuk ProjectOne
âœ… JWT authentication berfungsi
âœ… Email configuration siap
âœ… Frontend bisa call API endpoints
âœ… Check-in/check-out berfungsi
âœ… Attendance history tercatat
âœ… User profile bisa diupdate

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ BANTUAN:

Jika ada masalah:
1. Check QUICK_START.md
2. Check DEPLOYMENT_GUIDE.md
3. View Railway logs untuk error details
4. Check environment variables sudah benar
5. Restart Railway service

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ SIAP DEPLOY? 

Buka QUICK_START.md sekarang dan ikuti langkah-langkahnya!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Dibuat: 30 Januari 2026
Status: READY FOR PRODUCTION
Backend: Node.js + Express + PostgreSQL
Hosting: Railway
